<!DOCTYPE html>
<html><head><title>From ODE.scm:</title><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="This comes from Lie.scm." property="og:description"><meta content="From ODE.scm:" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><script src="https://cdn.tailwindcss.com?plugins=typography" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  @media print {
      h1 { @apply text-2xl !important; }
      h2 { @apply text-xl !important; }
      h3 { @apply text-lg !important; }
  }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.markdown-viewer ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.markdown-viewer .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.code-viewer {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.code-listing  {
    @apply -ml-8 -mr-8 relative !important;
}
.code-viewer .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
    .notebook-viewer .code-viewer .cm-content {
        @apply py-4 pl-12;
    }
    .notebook-viewer .code-listing {
        width: 48rem !important;
        @apply -ml-12 mr-0 !important;
    }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .result-viewer {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.notebook-viewer,
.markdown-viewer {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.markdown-viewer blockquote p:first-of-type:before,
.markdown-viewer blockquote p:last-of-type:after {
  @apply content-none;
}
.markdown-node-viewer.result-viewer.fragment-item {
    @apply mb-0 !important;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.markdown-viewer .toc      { @apply mt-4; }
.markdown-viewer h1 + .toc { @apply mt-8; }

.markdown-viewer .toc h1,
.markdown-viewer .toc h2,
.markdown-viewer .toc h3,
.markdown-viewer .toc h4,
.markdown-viewer .toc h5,
.markdown-viewer .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.markdown-viewer .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.markdown-viewer .toc li    { @apply m-0; }
.markdown-viewer .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.notebook-viewer { @apply py-16; }
#clerk-static-app .notebook-viewer { @apply pt-[0.8rem] pb-16; }
.markdown-viewer *:first-child:not(.code-viewer):not(li):not(h2):not(.sidenote) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .result-viewer { @apply mt-0; }
.code-viewer + .result-viewer { @apply mt-3; }
.markdown-viewer + .markdown-viewer { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
}
.sidenote {
  @apply block font-sans text-xs mt-4 bg-slate-100 dark:bg-slate-800 p-4;
  font-style: normal;
  font-weight: normal;
}
.sidenote-container {
  @apply mb-4;
}
@media (min-width: 860px) {
  .sidenote sup { @apply inline; }
  .sidenote-column {
    @apply w-[165px] absolute right-0 top-0 -mr-[205px];
  }
  .sidenote {
    @apply bg-transparent dark:bg-transparent p-0;
  }
  .sidenote:first-child {
    @apply mt-1;
  }
  .sidenotes-layout .markdown-viewer {
    @apply pr-[241px];
  }
  .sidenote-container {
    @apply relative mb-0;
  }
  .sidenotes-layout h1 {
    @apply w-[756px] !important;
  }
}
.code-viewer + .viewer:not(.code-viewer):not(.code-viewer-folded),
.code-viewer-folded + .viewer:not(.code-viewer):not(.code-viewer-folded),
.result-viewer:not(.markdown-node-viewer) + .result-viewer {
  @apply mt-2;
}
.code-viewer + .code-viewer-folded {
  @apply mt-4;
}
.result-viewer {
  @apply leading-tight mb-6;
}
.code-viewer.fragment-item.result-viewer {
  @apply mb-0 !important;
}
.result-viewer figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }

@media print {
    .dark-mode-toggle,
    .toc-toggle { @apply hidden; }
    .notebook-viewer { @apply pt-0; font-size: 12pt !important; margin-left: 0 !important; }
    .code-viewer .cm-content,
    .viewer-code .cm-content { @apply whitespace-pre-wrap !important; overflow: none; }
    .code-viewer .cm-line { font-size: 12pt !important; }
    html * { page-break-inside: avoid !important; }
    .toc-panel { @apply hidden; }
}
</style><script src="https://storage.clerk.garden/nextjournal/clerk-assets@4NdW4yYfmUzzw9xCkmyrJ75nH75d/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"></head><body><div id="clerk-static-app"></div><script type="module">let state = "{:out-path \"public/build\", :path->doc {\"src/emmy/calculus/covariant.cljc\" {:path [], :nextjournal/value {:toc {:type :toc, :children [{:children [{:type :toc, :content [{:type :text, :text \"From ODE.scm:\"}], :heading-level 2, :attrs {:id \"from-ode.scm:\"}, :path [:content 1]} {:type :toc, :content [{:type :text, :text \"Interior Product, from interior-product.scm\"}], :heading-level 2, :attrs {:id \"interior-product,-from-interior-product.scm\"}, :path [:content 8]} {:type :toc, :content [{:type :text, :text \"Covariant Derivative, from covariant-derivative.scm\"}], :heading-level 2, :attrs {:id \"covariant-derivative,-from-covariant-derivative.scm\"}, :path [:content 9], :children [{:type :toc, :content [{:type :text, :text \"Covariant Vector Definition\"}], :heading-level 3, :attrs {:id \"covariant-vector-definition\"}, :path [:content 10]}]}], :type :toc}]}, :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns emmy.calculus.covariant), :auto-expand-results? nil, :scope emmy.calculus.covariant, :bundle? false, :open-graph {:type \"article:clerk\", :title \"From ODE.scm:\", :description \"This comes from Lie.scm.\"}, :title \"From ODE.scm:\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.calculus.covariant/markdown-5drZMoqFZwGV8JhdyVWAXPcvWz7jpM\"} [:p [:<> \"This comes from \"] [:code [:<> \"Lie.scm\"]] [:<> \".\"]]], :nextjournal/opts {:id \"emmy.calculus.covariant/markdown-5drZMoqFZwGV8JhdyVWAXPcvWz7jpM\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- vector-field-Lie-derivative [X]\\n  (let [freeze-X (v/freeze X)\\n        op-name `(~'Lie-derivative ~freeze-X)]\\n    (-> (fn rec [Y]\\n          (cond (f/function? Y)      (X Y)\\n                (vf/vector-field? Y) (o/commutator X Y)\\n\\n                (ff/form-field? Y)\\n                (let [k (ff/get-rank Y)\\n                      op (fn [& vectors]\\n                           (let [vectors (into [] vectors)]\\n                             (assert (= k (count vectors))\\n                                     `(~'≠ ~k ~(count vectors)\\n                                       ~@vectors\\n                                       ~@(map meta vectors)))\\n                             (g/- ((g/Lie-derivative X) (apply Y vectors))\\n                                  (ua/generic-sum\\n                                   (fn [i]\\n                                     (let [xs (update vectors i (g/Lie-derivative X))]\\n                                       (apply Y xs)))\\n                                   0 k))))\\n                      name `((~'Lie-derivative ~freeze-X) ~(v/freeze Y))]\\n                  (ff/procedure->nform-field op k name))\\n\\n                (s/structure? Y)\\n                (s/mapr (vector-field-Lie-derivative X) Y)\\n\\n                :else (u/unsupported \\\"Bad argument: Lie Derivative\\\")))\\n        (o/make-operator op-name))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/vector-field-Lie-derivative-code\", :loc {:line 24, :end-line 52, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$vector_field_Lie_derivative 0x2df84e58 \\\"emmy.calculus.covariant$vector_field_Lie_derivative@2df84e58\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/vector-field-Lie-derivative-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/vector-field-Lie-derivative-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defmethod g/Lie-derivative [::vf/vector-field] [V]\\n  (vector-field-Lie-derivative V))\", :nextjournal/opts {:id \"emmy.calculus.covariant/anon-expr-5dtkYGPxy3DfSTHZeXobHCFyzs7D62-code\", :loc {:line 54, :end-line 55, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x504b2dc1 \\\"clojure.lang.MultiFn@504b2dc1\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/anon-expr-5dtkYGPxy3DfSTHZeXobHCFyzs7D62-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsGTChq8Ngxnn31iCQbBbPmmVvaTy\"}, :nextjournal/opts {:id \"emmy.calculus.covariant/anon-expr-5dtkYGPxy3DfSTHZeXobHCFyzs7D62-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.calculus.covariant/markdown-5drVrG4ErNqaJWc2buH7Vq5jGVcBmd\"} [\"h2\" {:id \"from-ode.scm:\"} [:<> \"From ODE.scm:\"]] [:p [:<> \"Let (sigma t) be the state of a system at time t.  Let the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"(first-order) system of differential equations governing the evolution of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"this state be:\"]] [:p [:<> \"((D sigma) t) = (R (sigma t))\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"or  (D sigma) = (compose R sigma)\"]] [:p [:<> \"i.e. R is a system derivative.\"]] [:p [:<> \"Let F be any function of state, then a differential equation for the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"evolution of F, as it is dragged along the integral curve sigma is:\"]] [:p [:<> \"(D (compose F sigma)) = (* (compose (D F) sigma) (D sigma))\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"= (compose (* (D F) R) sigma)\"]] [:p [:<> \"Let's call this operation Lie-D (the Lie derivative for coordinates):\"]]], :nextjournal/opts {:id \"emmy.calculus.covariant/markdown-5drVrG4ErNqaJWc2buH7Vq5jGVcBmd\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn Lie-D\\n  \\\"Takes a system derivative `R` and returns a operator that takes a function `F`\\n  of coordinatized state and performs the operation described below, from\\n  ODE.scm in scmutils:\\n\\n  Let `(sigma t)` be the state of a system at time `t`. Let the\\n  (first-order) system of differential equations governing the evolution of\\n  this state be:\\n\\n  ```clojure\\n  ((D sigma) t) = (R (sigma t))\\n  ```\\n\\n  ```clojure\\n  (D sigma) = (compose R sigma)\\n  ```\\n\\n  i.e. `R` is a system derivative.\\n\\n  Let `F` be any function of state, then a differential equation for the\\n  evolution of `F`, as it is dragged along the integral curve sigma is:\\n\\n  ```clojure\\n  (D (compose F sigma)) = (* (compose (D F) sigma) (D sigma))\\n  = (compose (* (D F) R) sigma)\\n  ```\\n\\n  Let's call this operation `Lie-D` (the Lie derivative for coordinates).\\\"\\n  [R]\\n  (-> (fn [F]\\n        (g/* (D F) R))\\n      (o/make-operator\\n       (list 'Lie-D (v/freeze R)))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Lie-D-code\", :loc {:line 76, :end-line 108, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Lie_D 0x3bd5e942 \\\"emmy.calculus.covariant$Lie_D@3bd5e942\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Lie-D-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Lie-D-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.calculus.covariant/markdown-5dtp71jBAyzznyjQrbhmpCBT3N7SCG\"} [\"h2\" {:id \"interior-product,-from-interior-product.scm\"} [:<> \"Interior Product, from interior-product.scm\"]]], :nextjournal/opts {:id \"emmy.calculus.covariant/markdown-5dtp71jBAyzznyjQrbhmpCBT3N7SCG\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn interior-product [X]\\n  (assert (vf/vector-field? X))\\n  (fn ix [alpha]\\n    (assert (ff/form-field? alpha))\\n    (let [p (ff/get-rank alpha)]\\n      (assert (> p 0)\\n              \\\"Rank of form not greater than zero: interior-product\\\")\\n      (ff/procedure->nform-field\\n       (fn the-product [& vectors]\\n         (assert (= (dec p) (count vectors)))\\n         (apply alpha X vectors))\\n       (dec p)\\n       `((~'interior-product ~(v/freeze X))\\n         ~(v/freeze alpha))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/interior-product-code\", :loc {:line 112, :end-line 125, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$interior_product 0x60d904c5 \\\"emmy.calculus.covariant$interior_product@60d904c5\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/interior-product-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/interior-product-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.calculus.covariant/markdown-5dqpFSgT2JmsZBcYvqDRfuDbBXB3WQ\"} [\"h2\" {:id \"covariant-derivative,-from-covariant-derivative.scm\"} [:<> \"Covariant Derivative, from covariant-derivative.scm\"]]], :nextjournal/opts {:id \"emmy.calculus.covariant/markdown-5dqpFSgT2JmsZBcYvqDRfuDbBXB3WQ\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn make-Cartan\\n  [forms basis]\\n  {:type ::Cartan\\n   :forms forms\\n   :basis basis})\", :nextjournal/opts {:id \"emmy.calculus.covariant/make-Cartan-code\", :loc {:line 129, :end-line 133, :column 1, :end-column 18}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$make_Cartan 0xfbc0c08 \\\"emmy.calculus.covariant$make_Cartan@fbc0c08\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/make-Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/make-Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan? [x]\\n  (= (v/kind x) ::Cartan))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan?-code\", :loc {:line 135, :end-line 136, :column 1, :end-column 27}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan_QMARK_ 0x6901d1b \\\"emmy.calculus.covariant$Cartan_QMARK_@6901d1b\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan->forms [C]\\n  (:forms C))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->forms-code\", :loc {:line 138, :end-line 139, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan__GT_forms 0x129b6b72 \\\"emmy.calculus.covariant$Cartan__GT_forms@129b6b72\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->forms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->forms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan->basis [C]\\n  (:basis C))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->basis-code\", :loc {:line 141, :end-line 142, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan__GT_basis 0x3accbac8 \\\"emmy.calculus.covariant$Cartan__GT_basis@3accbac8\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->basis-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->basis-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn make-Christoffel\\n  \\\"Returns a data structure representing [Christoffel symbols of the second\\n  kind](https://en.wikipedia.org/wiki/Christoffel_symbols#Christoffel_symbols_of_the_second_kind_(symmetric_definition)).\\\"\\n  [symbols basis]\\n  {:type ::Christoffel\\n   :symbols symbols\\n   :basis basis})\", :nextjournal/opts {:id \"emmy.calculus.covariant/make-Christoffel-code\", :loc {:line 144, :end-line 150, :column 1, :end-column 18}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$make_Christoffel 0x557f3dd5 \\\"emmy.calculus.covariant$make_Christoffel@557f3dd5\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/make-Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/make-Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Christoffel? [x]\\n  (= (v/kind x) ::Christoffel))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel?-code\", :loc {:line 152, :end-line 153, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Christoffel_QMARK_ 0x53019aa4 \\\"emmy.calculus.covariant$Christoffel_QMARK_@53019aa4\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Christoffel->symbols [C]\\n  (:symbols C))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->symbols-code\", :loc {:line 155, :end-line 156, :column 1, :end-column 16}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Christoffel__GT_symbols 0x1a08bb4d \\\"emmy.calculus.covariant$Christoffel__GT_symbols@1a08bb4d\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->symbols-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->symbols-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Christoffel->basis [C]\\n  (:basis C))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->basis-code\", :loc {:line 158, :end-line 159, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Christoffel__GT_basis 0x45cd583e \\\"emmy.calculus.covariant$Christoffel__GT_basis@45cd583e\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->basis-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->basis-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan->Christoffel [Cartan]\\n  {:pre [(Cartan? Cartan)]}\\n  (let [basis (Cartan->basis Cartan)\\n        forms (Cartan->forms Cartan)]\\n    (make-Christoffel\\n     (s/mapr forms (b/basis->vector-basis basis))\\n     basis)))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Christoffel-code\", :loc {:line 161, :end-line 167, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan__GT_Christoffel 0x697044c7 \\\"emmy.calculus.covariant$Cartan__GT_Christoffel@697044c7\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Christoffel->Cartan [Christoffel]\\n  {:pre [(Christoffel? Christoffel)]}\\n  (let [basis   (Christoffel->basis Christoffel)\\n        symbols (Christoffel->symbols Christoffel)]\\n    (make-Cartan\\n     (g/* symbols (b/basis->oneform-basis basis))\\n     basis)))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->Cartan-code\", :loc {:line 169, :end-line 175, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Christoffel__GT_Cartan 0x367b37f7 \\\"emmy.calculus.covariant$Christoffel__GT_Cartan@367b37f7\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Christoffel->Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn symmetrize-Christoffel [G]\\n  (let [s (Christoffel->symbols G)]\\n    (make-Christoffel\\n     (g/* (g// 1 2)\\n          (g/+ s (s/transpose-outer s)))\\n     (Christoffel->basis G))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Christoffel-code\", :loc {:line 177, :end-line 182, :column 1, :end-column 31}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$symmetrize_Christoffel 0x69f630a6 \\\"emmy.calculus.covariant$symmetrize_Christoffel@69f630a6\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Christoffel-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn symmetrize-Cartan [Cartan]\\n  (Christoffel->Cartan\\n   (symmetrize-Christoffel\\n    (Cartan->Christoffel Cartan))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Cartan-code\", :loc {:line 184, :end-line 187, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$symmetrize_Cartan 0x4655990e \\\"emmy.calculus.covariant$symmetrize_Cartan@4655990e\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/symmetrize-Cartan-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan-transform\\n  [cartan basis-prime]\\n  (let [basis (Cartan->basis cartan) ;; tuple of basis vectors\\n        forms (Cartan->forms cartan)\\n        prime-dual-basis (b/basis->oneform-basis basis-prime)\\n        prime-vector-basis (b/basis->vector-basis basis-prime)\\n        vector-basis (b/basis->vector-basis basis)\\n        oneform-basis (b/basis->oneform-basis basis)\\n        J-inv (s/mapr oneform-basis prime-vector-basis)\\n        J (s/mapr prime-dual-basis vector-basis)\\n        omega-prime-forms (ff/procedure->oneform-field\\n                           (fn [u]\\n                             (g/+\\n                              (g/* J (u J-inv))\\n                              (g/* J (g/* (forms u) J-inv))))\\n                           'omega-prime-forms)]\\n    (make-Cartan omega-prime-forms basis-prime)))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan-transform-code\", :loc {:line 189, :end-line 205, :column 1, :end-column 50}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan_transform 0x2d68ab7f \\\"emmy.calculus.covariant$Cartan_transform@2d68ab7f\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan-transform-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan-transform-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn Cartan->Cartan-over-map [Cartan map]\\n  (let [basis (cm/basis->basis-over-map\\n               map (Cartan->basis Cartan))\\n        forms (s/mapr (cm/form-field->form-field-over-map map)\\n                      (Cartan->forms Cartan))]\\n    (make-Cartan forms basis)))\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Cartan-over-map-code\", :loc {:line 207, :end-line 212, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$Cartan__GT_Cartan_over_map 0x4243f5aa \\\"emmy.calculus.covariant$Cartan__GT_Cartan_over_map@4243f5aa\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Cartan-over-map-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/Cartan->Cartan-over-map-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.calculus.covariant/markdown-5drmA6RQpZMgaqWyvXwPSUJATsP9JX\"} [\"h3\" {:id \"covariant-vector-definition\"} [:<> \"Covariant Vector Definition\"]]], :nextjournal/opts {:id \"emmy.calculus.covariant/markdown-5drmA6RQpZMgaqWyvXwPSUJATsP9JX\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- covariant-derivative-vector [Cartan]\\n  (let [basis (Cartan->basis Cartan)\\n        Cartan-forms (Cartan->forms Cartan)\\n        vector-basis (b/basis->vector-basis basis)\\n        oneform-basis (b/basis->oneform-basis basis)]\\n    (fn [V]\\n      (let [CV (Cartan-forms V)]\\n        (fn [U]\\n          (let [u-components (oneform-basis U)\\n                deriv-components (g/+ (V u-components)\\n                                      (g/* CV u-components))]\\n            (vf/procedure->vector-field\\n             (fn the-derivative [f]\\n               (g/* (vector-basis f) deriv-components))\\n             `((~'nabla ~(v/freeze V))\\n               ~(v/freeze U)))))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-vector-code\", :loc {:line 216, :end-line 231, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative_vector 0x1ae88e44 \\\"emmy.calculus.covariant$covariant_derivative_vector@1ae88e44\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-vector-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-vector-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- covariant-derivative-form [Cartan]\\n  (fn [V]\\n    (fn [tau]\\n      (let [k (ff/get-rank tau)\\n            nabla_V ((covariant-derivative-vector Cartan) V)\\n            op (fn [& vectors]\\n                 (let [vectors (into [] vectors)]\\n                   (assert (= k (count vectors)))\\n                   (g/- (V (apply tau vectors))\\n                        (ua/generic-sum\\n                         (fn [i]\\n                           (let [xs (update vectors i nabla_V)]\\n                             (apply tau xs)))\\n                         0 k))))\\n            name `((~'nabla ~(v/freeze V))\\n                   ~(v/freeze tau))]\\n        (ff/procedure->nform-field op k name)))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-form-code\", :loc {:line 233, :end-line 249, :column 1, :end-column 50}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative_form 0x701fe9fe \\\"emmy.calculus.covariant$covariant_derivative_form@701fe9fe\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-form-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-form-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- covariant-derivative-argument-types\\n  \\\"NOTE: Returns a derivative with the same argument types as the original input\\n  function.\\\"\\n  [Cartan]\\n  (let [basis (Cartan->basis Cartan)\\n        vector-basis (b/basis->vector-basis basis)\\n        oneform-basis (b/basis->oneform-basis basis)\\n        Cartan-forms (Cartan->forms Cartan)]\\n    (fn [V]\\n      (let [CV (Cartan-forms V)]\\n        (fn [T]\\n          (let [arg-types (ci/argument-types T)]\\n            (assert\\n             (every? (fn [t]\\n                       (or (isa? t ::vf/vector-field)\\n                           (isa? t ::ff/oneform-field)))\\n                     arg-types))\\n            (letfn [(lp [types args targs factors]\\n                      (if (empty? types)\\n                        (g/* (V (apply T targs))\\n                             (apply g/* factors))\\n                        (b/contract\\n                         (fn [e w]\\n                           (cond (isa? (first types) ::vf/vector-field)\\n                                 (do (assert (vf/vector-field? (first args)))\\n                                     (lp (rest types)\\n                                         (rest args)\\n                                         (conj targs e)\\n                                         (conj factors (w (first args)))))\\n\\n                                 (isa? (first types) ::ff/oneform-field)\\n                                 (do (assert (ff/oneform-field? (first args)))\\n                                     (lp (rest types)\\n                                         (rest args)\\n                                         (conj targs w)\\n                                         (conj factors ((first args) e))))))\\n                         basis)))\\n                    (the-derivative [& args]\\n                      (assert (= (count args)\\n                                 (count arg-types)))\\n                      (let [argv (into [] args)\\n                            VT (lp arg-types argv [] [])\\n                            corrections (ua/generic-sum\\n                                         (map-indexed\\n                                          (fn [i type]\\n                                            (cond\\n                                              ;; positive\\n                                              (isa? type ::ff/oneform-field)\\n                                              (g/*\\n                                               (g/* (s/mapr (fn [e]\\n                                                              ((nth argv i) e))\\n                                                            vector-basis)\\n                                                    CV)\\n                                               (s/mapr\\n                                                (fn [w]\\n                                                  (apply T (assoc argv i w)))\\n                                                oneform-basis))\\n\\n                                              ;; negative\\n                                              (isa? type ::vf/vector-field)\\n                                              (g/negate\\n                                               (g/*\\n                                                (s/mapr\\n                                                 (fn [e]\\n                                                   (apply T (assoc argv i e)))\\n                                                 vector-basis)\\n                                                (g/* CV (s/mapr\\n                                                         (fn [w]\\n                                                           (w (nth argv i)))\\n                                                         oneform-basis))))))\\n                                          arg-types))]\\n                        (g/+ VT corrections)))]\\n              (ci/with-argument-types\\n                the-derivative\\n                arg-types))))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-argument-types-code\", :loc {:line 251, :end-line 325, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative_argument_types 0x18c497d1 \\\"emmy.calculus.covariant$covariant_derivative_argument_types@18c497d1\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-argument-types-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-argument-types-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- covariant-derivative-function [Cartan]\\n  (fn [X]\\n    (fn [f]\\n      (fn [& args]\\n        (let [types (apply v/argument-kind args)]\\n          (cond (and (= (count args) 1)\\n                     (manifold/manifold-point? (first args)))\\n                (let [f (ci/with-argument-types f types)]\\n                  ((X f) (first args)))\\n\\n                (every? (fn [arg] ;; either a vector field or oneform.\\n                          (or (vf/vector-field? arg)\\n                              (ff/oneform-field? arg)))\\n                        args)\\n                (let [f (ci/with-argument-types f types)]\\n                  (apply (((covariant-derivative-argument-types Cartan) X) f)\\n                         args))\\n\\n                :else\\n                (u/illegal \\\"Bad function or arguments to covariant derivative\\\")))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-function-code\", :loc {:line 327, :end-line 346, :column 1, :end-column 86}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative_function 0x4577dfc6 \\\"emmy.calculus.covariant$covariant_derivative_function@4577dfc6\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-function-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-function-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- covariant-derivative-ordinary [Cartan]\\n  {:pre [(Cartan? Cartan)]}\\n  (fn [X]\\n    (let [op (fn nabla_X [V]\\n               (cond (vf/vector-field? V)\\n                     (((covariant-derivative-vector Cartan) X) V)\\n\\n                     (ff/form-field? V)\\n                     (((covariant-derivative-form Cartan) X) V)\\n\\n                     (ci/has-argument-types? V)\\n                     (((covariant-derivative-argument-types Cartan) X) V)\\n\\n                     (f/function? V)\\n                     (((covariant-derivative-function Cartan) X) V)\\n\\n                     (s/structure? V)\\n                     (s/mapr nabla_X V)\\n\\n                     :else\\n                     (u/unsupported\\n                      (str \\\"Can't do this kind of covariant derivative yet \\\"\\n                           (v/freeze X) \\\" @ \\\" (v/freeze V)))))\\n          name `(~'nabla\\n                 ~(v/freeze X))]\\n      (o/make-operator op name))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-ordinary-code\", :loc {:line 348, :end-line 373, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative_ordinary 0x1b33e382 \\\"emmy.calculus.covariant$covariant_derivative_ordinary@1b33e382\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-ordinary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-ordinary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn covariant-derivative\\n  ([Cartan]\\n   (covariant-derivative-ordinary Cartan))\\n  ([Cartan map]\\n   (let [mapped (Cartan->Cartan-over-map Cartan map)]\\n     (covariant-derivative-ordinary\\n      (make-Cartan (f/compose (Cartan->forms mapped)\\n                              (cm/differential map))\\n                   (Cartan->basis mapped))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-code\", :loc {:line 375, :end-line 383, :column 1, :end-column 47}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_derivative 0x146cb903 \\\"emmy.calculus.covariant$covariant_derivative@146cb903\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-derivative-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn covariant-differential [Cartan]\\n  (fn [V]\\n    (fn [X]\\n      (((covariant-derivative Cartan) X) V))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-differential-code\", :loc {:line 385, :end-line 388, :column 1, :end-column 47}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$covariant_differential 0x282ace40 \\\"emmy.calculus.covariant$covariant_differential@282ace40\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/covariant-differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn geodesic-equation\\n  [source-coordsys target-coordsys Cartan-on-target]\\n  (fn [gamma]\\n    (fn [source-m]\\n      {:pre [(= 1 (:dimension\\n                   (manifold/manifold source-coordsys)))]}\\n      (let [e (vf/coordinate-system->vector-basis source-coordsys)]\\n        (((((covariant-derivative Cartan-on-target gamma)\\n            e)\\n           ((cm/differential gamma) e))\\n          (manifold/chart target-coordsys))\\n         source-m)))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/geodesic-equation-code\", :loc {:line 390, :end-line 401, :column 1, :end-column 23}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$geodesic_equation 0x5358bd6c \\\"emmy.calculus.covariant$geodesic_equation@5358bd6c\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/geodesic-equation-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/geodesic-equation-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn parallel-transport-equation\\n  [source-coordsys target-coordsys Cartan-on-target]\\n  (fn [gamma]\\n    (fn [vector-over-gamma]\\n      (fn [source-m]\\n        {:pre [(= 1 (:dimension\\n                     (manifold/manifold source-coordsys)))]}\\n        (let [e (vf/coordinate-system->vector-basis source-coordsys)]\\n          (((((covariant-derivative Cartan-on-target gamma)\\n              e) ;; d/dt\\n             vector-over-gamma)\\n            (manifold/chart target-coordsys))\\n           source-m))))))\", :nextjournal/opts {:id \"emmy.calculus.covariant/parallel-transport-equation-code\", :loc {:line 403, :end-line 415, :column 1, :end-column 26}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.calculus.covariant$parallel_transport_equation 0x57736b76 \\\"emmy.calculus.covariant$parallel_transport_equation@57736b76\\\"]\", :nextjournal/opts {:id \"emmy.calculus.covariant/parallel-transport-equation-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.calculus.covariant/parallel-transport-equation-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}], :css-class nil}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :index \"dev/emmy/notebook.clj\", :browse? false, :git/url \"https://github.com/mentat-collective/emmy\", :paths [\"src/emmy/abstract/number.cljc\" \"src/emmy/special/elliptic.cljc\" \"src/emmy/polynomial/interpolate.cljc\" \"src/emmy/numerical/quadrature/midpoint.cljc\" \"src/emmy/numerical/quadrature/trapezoid.cljc\" \"src/emmy/sci.cljc\" \"src/emmy/calculus/map.cljc\" \"src/emmy/pattern/rule.cljc\" \"src/emmy/mechanics/time_evolution.cljc\" \"src/emmy/util/permute.cljc\" \"src/emmy/expression/cse.cljc\" \"src/emmy/complex.cljc\" \"src/emmy/generic.cljc\" \"src/emmy/expression/compile.cljc\" \"src/emmy/sr/frames.cljc\" \"src/emmy/function.cljc\" \"src/emmy/polynomial/richardson.cljc\" \"src/emmy/numerical/unimin/brent.cljc\" \"src/emmy/numsymb.cljc\" \"src/emmy/calculus/vector_field.cljc\" \"src/emmy/numerical/minimize.cljc\" \"src/emmy/rational_function.cljc\" \"src/emmy/mechanics/noether.cljc\" \"src/emmy/calculus/hodge_star.cljc\" \"src/emmy/series.cljc\" \"src/emmy/series/impl.cljc\" \"src/emmy/calculus/manifold.cljc\" \"src/emmy/util/logic.cljc\" \"src/emmy/util/stopwatch.cljc\" \"src/emmy/numerical/quadrature/adaptive.cljc\" \"src/emmy/mechanics/rotation.cljc\" \"src/emmy/numerical/ode.cljc\" \"src/emmy/numerical/quadrature/riemann.cljc\" \"src/emmy/calculus/connection.cljc\" \"src/emmy/numbers.cljc\" \"src/emmy/algebra/fold.cljc\" \"src/emmy/numerical/multimin/nelder_mead.cljc\" \"src/emmy/polynomial/exponent.cljc\" \"src/emmy/polynomial/factor.cljc\" \"src/emmy/util/def.cljc\" \"src/emmy/abstract/function.cljc\" \"src/emmy/calculus/indexed.cljc\" \"src/emmy/numerical/quadrature.cljc\" \"src/emmy/numerical/quadrature/infinite.cljc\" \"src/emmy/mechanics/routhian.cljc\" \"src/emmy/numerical/quadrature/bulirsch_stoer.cljc\" \"src/emmy/ratio.cljc\" \"src/emmy/calculus/curvature.cljc\" \"src/emmy/numerical/quadrature/milne.cljc\" \"src/emmy/calculus/form_field.cljc\" \"src/emmy/mechanics/hamilton.cljc\" \"src/emmy/expression/render.cljc\" \"src/emmy/util/stream.cljc\" \"src/emmy/calculus/derivative.cljc\" \"dev/emmy/notebook.clj\" \"src/emmy/util/aggregate.cljc\" \"src/emmy/numerical/quadrature/romberg.cljc\" \"src/emmy/numerical/quadrature/boole.cljc\" \"src/emmy/pattern/match.cljc\" \"src/emmy/calculus/metric.cljc\" \"src/emmy/polynomial/gcd.cljc\" \"src/emmy/numerical/quadrature/substitute.cljc\" \"src/emmy/euclid.cljc\" \"src/emmy/calculus/vector_calculus.cljc\" \"src/emmy/collection.cljc\" \"src/emmy/numerical/quadrature/simpson.cljc\" \"src/emmy/calculus/basis.cljc\" \"src/emmy/util/vector_set.cljc\" \"src/emmy/pattern/syntax.cljc\" \"src/emmy/numerical/quadrature/common.cljc\" \"src/emmy/sr/boost.cljc\" \"src/emmy/calculus/coordinate.cljc\" \"src/emmy/calculus/covariant.cljc\" \"src/emmy/numerical/derivative.cljc\" \"src/emmy/simplify/rules.cljc\" \"src/emmy/mechanics/rigid.cljc\" \"src/emmy/quaternion.cljc\" \"src/emmy/rational_function/interpolate.cljc\" \"src/emmy/numerical/unimin/bracket.cljc\" \"src/emmy/numerical/roots/bisect.cljc\" \"src/emmy/numerical/quadrature/simpson38.cljc\" \"src/emmy/mechanics/lagrange.cljc\" \"src/emmy/expression/analyze.cljc\" \"src/emmy/calculus/frame.cljc\" \"src/emmy/pattern/consequence.cljc\" \"src/emmy/env.cljc\" \"src/emmy/util.cljc\" \"src/emmy/matrix.cljc\" \"src/emmy/sci/macros.cljc\" \"src/emmy/numerical/unimin/golden.cljc\" \"src/emmy/special/factorial.cljc\" \"src/emmy/polynomial/impl.cljc\" \"src/emmy/modint.cljc\"], :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@4NdW4yYfmUzzw9xCkmyrJ75nH75d/viewer.js?immutable=true\"}, :current-path \"src/emmy/calculus/covariant.cljc\", :bundle? false, :git/sha \"9ab30af2a7d82d37c83d7d3b2821e923762ec2e7\", :path->url {\"src/emmy/abstract/number.cljc\" \"src/emmy/abstract/number.html\", \"src/emmy/special/elliptic.cljc\" \"src/emmy/special/elliptic.html\", \"src/emmy/polynomial/interpolate.cljc\" \"src/emmy/polynomial/interpolate.html\", \"src/emmy/numerical/quadrature/midpoint.cljc\" \"src/emmy/numerical/quadrature/midpoint.html\", \"src/emmy/numerical/quadrature/trapezoid.cljc\" \"src/emmy/numerical/quadrature/trapezoid.html\", \"src/emmy/sci.cljc\" \"src/emmy/sci.html\", \"src/emmy/calculus/map.cljc\" \"src/emmy/calculus/map.html\", \"src/emmy/pattern/rule.cljc\" \"src/emmy/pattern/rule.html\", \"src/emmy/mechanics/time_evolution.cljc\" \"src/emmy/mechanics/time_evolution.html\", \"src/emmy/util/permute.cljc\" \"src/emmy/util/permute.html\", \"src/emmy/expression/cse.cljc\" \"src/emmy/expression/cse.html\", \"src/emmy/complex.cljc\" \"src/emmy/complex.html\", \"src/emmy/generic.cljc\" \"src/emmy/generic.html\", \"src/emmy/expression/compile.cljc\" \"src/emmy/expression/compile.html\", \"src/emmy/sr/frames.cljc\" \"src/emmy/sr/frames.html\", \"src/emmy/function.cljc\" \"src/emmy/function.html\", \"src/emmy/polynomial/richardson.cljc\" \"src/emmy/polynomial/richardson.html\", \"src/emmy/numerical/unimin/brent.cljc\" \"src/emmy/numerical/unimin/brent.html\", \"src/emmy/numsymb.cljc\" \"src/emmy/numsymb.html\", \"src/emmy/calculus/vector_field.cljc\" \"src/emmy/calculus/vector_field.html\", \"src/emmy/numerical/minimize.cljc\" \"src/emmy/numerical/minimize.html\", \"src/emmy/rational_function.cljc\" \"src/emmy/rational_function.html\", \"src/emmy/mechanics/noether.cljc\" \"src/emmy/mechanics/noether.html\", \"src/emmy/calculus/hodge_star.cljc\" \"src/emmy/calculus/hodge_star.html\", \"src/emmy/series.cljc\" \"src/emmy/series.html\", \"src/emmy/series/impl.cljc\" \"src/emmy/series/impl.html\", \"src/emmy/calculus/manifold.cljc\" \"src/emmy/calculus/manifold.html\", \"src/emmy/util/logic.cljc\" \"src/emmy/util/logic.html\", \"src/emmy/util/stopwatch.cljc\" \"src/emmy/util/stopwatch.html\", \"src/emmy/numerical/quadrature/adaptive.cljc\" \"src/emmy/numerical/quadrature/adaptive.html\", \"src/emmy/mechanics/rotation.cljc\" \"src/emmy/mechanics/rotation.html\", \"src/emmy/numerical/ode.cljc\" \"src/emmy/numerical/ode.html\", \"src/emmy/numerical/quadrature/riemann.cljc\" \"src/emmy/numerical/quadrature/riemann.html\", \"src/emmy/calculus/connection.cljc\" \"src/emmy/calculus/connection.html\", \"src/emmy/numbers.cljc\" \"src/emmy/numbers.html\", \"src/emmy/algebra/fold.cljc\" \"src/emmy/algebra/fold.html\", \"src/emmy/numerical/multimin/nelder_mead.cljc\" \"src/emmy/numerical/multimin/nelder_mead.html\", \"src/emmy/polynomial/exponent.cljc\" \"src/emmy/polynomial/exponent.html\", \"src/emmy/polynomial/factor.cljc\" \"src/emmy/polynomial/factor.html\", \"src/emmy/util/def.cljc\" \"src/emmy/util/def.html\", \"src/emmy/abstract/function.cljc\" \"src/emmy/abstract/function.html\", \"src/emmy/calculus/indexed.cljc\" \"src/emmy/calculus/indexed.html\", \"src/emmy/numerical/quadrature.cljc\" \"src/emmy/numerical/quadrature.html\", \"src/emmy/numerical/quadrature/infinite.cljc\" \"src/emmy/numerical/quadrature/infinite.html\", \"src/emmy/mechanics/routhian.cljc\" \"src/emmy/mechanics/routhian.html\", \"src/emmy/numerical/quadrature/bulirsch_stoer.cljc\" \"src/emmy/numerical/quadrature/bulirsch_stoer.html\", \"src/emmy/ratio.cljc\" \"src/emmy/ratio.html\", \"src/emmy/calculus/curvature.cljc\" \"src/emmy/calculus/curvature.html\", \"src/emmy/numerical/quadrature/milne.cljc\" \"src/emmy/numerical/quadrature/milne.html\", \"src/emmy/calculus/form_field.cljc\" \"src/emmy/calculus/form_field.html\", \"src/emmy/mechanics/hamilton.cljc\" \"src/emmy/mechanics/hamilton.html\", \"src/emmy/expression/render.cljc\" \"src/emmy/expression/render.html\", \"src/emmy/util/stream.cljc\" \"src/emmy/util/stream.html\", \"src/emmy/calculus/derivative.cljc\" \"src/emmy/calculus/derivative.html\", \"dev/emmy/notebook.clj\" \"\", \"src/emmy/util/aggregate.cljc\" \"src/emmy/util/aggregate.html\", \"src/emmy/numerical/quadrature/romberg.cljc\" \"src/emmy/numerical/quadrature/romberg.html\", \"src/emmy/numerical/quadrature/boole.cljc\" \"src/emmy/numerical/quadrature/boole.html\", \"src/emmy/pattern/match.cljc\" \"src/emmy/pattern/match.html\", \"src/emmy/calculus/metric.cljc\" \"src/emmy/calculus/metric.html\", \"src/emmy/polynomial/gcd.cljc\" \"src/emmy/polynomial/gcd.html\", \"src/emmy/numerical/quadrature/substitute.cljc\" \"src/emmy/numerical/quadrature/substitute.html\", \"src/emmy/euclid.cljc\" \"src/emmy/euclid.html\", \"src/emmy/calculus/vector_calculus.cljc\" \"src/emmy/calculus/vector_calculus.html\", \"src/emmy/collection.cljc\" \"src/emmy/collection.html\", \"src/emmy/numerical/quadrature/simpson.cljc\" \"src/emmy/numerical/quadrature/simpson.html\", \"src/emmy/calculus/basis.cljc\" \"src/emmy/calculus/basis.html\", \"src/emmy/util/vector_set.cljc\" \"src/emmy/util/vector_set.html\", \"src/emmy/pattern/syntax.cljc\" \"src/emmy/pattern/syntax.html\", \"src/emmy/numerical/quadrature/common.cljc\" \"src/emmy/numerical/quadrature/common.html\", \"src/emmy/sr/boost.cljc\" \"src/emmy/sr/boost.html\", \"src/emmy/calculus/coordinate.cljc\" \"src/emmy/calculus/coordinate.html\", \"src/emmy/calculus/covariant.cljc\" \"src/emmy/calculus/covariant.html\", \"src/emmy/numerical/derivative.cljc\" \"src/emmy/numerical/derivative.html\", \"src/emmy/simplify/rules.cljc\" \"src/emmy/simplify/rules.html\", \"src/emmy/mechanics/rigid.cljc\" \"src/emmy/mechanics/rigid.html\", \"src/emmy/quaternion.cljc\" \"src/emmy/quaternion.html\", \"src/emmy/rational_function/interpolate.cljc\" \"src/emmy/rational_function/interpolate.html\", \"src/emmy/numerical/unimin/bracket.cljc\" \"src/emmy/numerical/unimin/bracket.html\", \"src/emmy/numerical/roots/bisect.cljc\" \"src/emmy/numerical/roots/bisect.html\", \"src/emmy/numerical/quadrature/simpson38.cljc\" \"src/emmy/numerical/quadrature/simpson38.html\", \"src/emmy/mechanics/lagrange.cljc\" \"src/emmy/mechanics/lagrange.html\", \"src/emmy/expression/analyze.cljc\" \"src/emmy/expression/analyze.html\", \"src/emmy/calculus/frame.cljc\" \"src/emmy/calculus/frame.html\", \"src/emmy/pattern/consequence.cljc\" \"src/emmy/pattern/consequence.html\", \"src/emmy/env.cljc\" \"src/emmy/env.html\", \"src/emmy/util.cljc\" \"src/emmy/util.html\", \"src/emmy/matrix.cljc\" \"src/emmy/matrix.html\", \"src/emmy/sci/macros.cljc\" \"src/emmy/sci/macros.html\", \"src/emmy/numerical/unimin/golden.cljc\" \"src/emmy/numerical/unimin/golden.html\", \"src/emmy/special/factorial.cljc\" \"src/emmy/special/factorial.html\", \"src/emmy/polynomial/impl.cljc\" \"src/emmy/polynomial/impl.html\", \"src/emmy/modint.cljc\" \"src/emmy/modint.html\"}, :expanded-paths [\"src/emmy/special/elliptic.cljc\" \"src/emmy/special/factorial.cljc\" \"src/emmy/sr/frames.cljc\" \"src/emmy/sr/boost.cljc\" \"src/emmy/rational_function/interpolate.cljc\" \"src/emmy/calculus/connection.cljc\" \"src/emmy/calculus/manifold.cljc\" \"src/emmy/calculus/derivative.cljc\" \"src/emmy/calculus/frame.cljc\" \"src/emmy/calculus/coordinate.cljc\" \"src/emmy/calculus/vector_calculus.cljc\" \"src/emmy/calculus/map.cljc\" \"src/emmy/calculus/form_field.cljc\" \"src/emmy/calculus/hodge_star.cljc\" \"src/emmy/calculus/basis.cljc\" \"src/emmy/calculus/covariant.cljc\" \"src/emmy/calculus/curvature.cljc\" \"src/emmy/calculus/indexed.cljc\" \"src/emmy/calculus/vector_field.cljc\" \"src/emmy/calculus/metric.cljc\" \"src/emmy/numerical/multimin/nelder_mead.cljc\" \"src/emmy/numerical/quadrature/midpoint.cljc\" \"src/emmy/numerical/quadrature/substitute.cljc\" \"src/emmy/numerical/quadrature/milne.cljc\" \"src/emmy/numerical/quadrature/riemann.cljc\" \"src/emmy/numerical/quadrature/simpson38.cljc\" \"src/emmy/numerical/quadrature/boole.cljc\" \"src/emmy/numerical/quadrature/romberg.cljc\" \"src/emmy/numerical/quadrature/infinite.cljc\" \"src/emmy/numerical/quadrature/bulirsch_stoer.cljc\" \"src/emmy/numerical/quadrature/trapezoid.cljc\" \"src/emmy/numerical/quadrature/adaptive.cljc\" \"src/emmy/numerical/quadrature/common.cljc\" \"src/emmy/numerical/quadrature/simpson.cljc\" \"src/emmy/numerical/derivative.cljc\" \"src/emmy/numerical/quadrature.cljc\" \"src/emmy/numerical/minimize.cljc\" \"src/emmy/numerical/roots/bisect.cljc\" \"src/emmy/numerical/ode.cljc\" \"src/emmy/numerical/unimin/golden.cljc\" \"src/emmy/numerical/unimin/brent.cljc\" \"src/emmy/numerical/unimin/bracket.cljc\" \"src/emmy/algebra/fold.cljc\" \"src/emmy/util/stopwatch.cljc\" \"src/emmy/util/vector_set.cljc\" \"src/emmy/util/def.cljc\" \"src/emmy/util/stream.cljc\" \"src/emmy/util/permute.cljc\" \"src/emmy/util/aggregate.cljc\" \"src/emmy/util/logic.cljc\" \"src/emmy/abstract/number.cljc\" \"src/emmy/abstract/function.cljc\" \"src/emmy/expression/cse.cljc\" \"src/emmy/expression/compile.cljc\" \"src/emmy/expression/analyze.cljc\" \"src/emmy/expression/render.cljc\" \"src/emmy/pattern/match.cljc\" \"src/emmy/pattern/rule.cljc\" \"src/emmy/pattern/consequence.cljc\" \"src/emmy/pattern/syntax.cljc\" \"src/emmy/mechanics/time_evolution.cljc\" \"src/emmy/mechanics/lagrange.cljc\" \"src/emmy/mechanics/routhian.cljc\" \"src/emmy/mechanics/noether.cljc\" \"src/emmy/mechanics/rotation.cljc\" \"src/emmy/mechanics/rigid.cljc\" \"src/emmy/mechanics/hamilton.cljc\" \"src/emmy/sci/macros.cljc\" \"src/emmy/polynomial/impl.cljc\" \"src/emmy/polynomial/richardson.cljc\" \"src/emmy/polynomial/interpolate.cljc\" \"src/emmy/polynomial/factor.cljc\" \"src/emmy/polynomial/gcd.cljc\" \"src/emmy/polynomial/exponent.cljc\" \"src/emmy/simplify/rules.cljc\" \"src/emmy/series/impl.cljc\" \"src/emmy/collection.cljc\" \"src/emmy/complex.cljc\" \"src/emmy/euclid.cljc\" \"src/emmy/env.cljc\" \"src/emmy/function.cljc\" \"src/emmy/generic.cljc\" \"src/emmy/matrix.cljc\" \"src/emmy/modint.cljc\" \"src/emmy/numbers.cljc\" \"src/emmy/numsymb.cljc\" \"src/emmy/quaternion.cljc\" \"src/emmy/ratio.cljc\" \"src/emmy/rational_function.cljc\" \"src/emmy/sci.cljc\" \"src/emmy/series.cljc\" \"src/emmy/util.cljc\" \"dev/emmy/notebook.clj\"], :cname \"emmy.mentat.org\", :watch-paths [\"src\" \"dev\"], :report-fn #object[nextjournal.clerk.builder$stdout_reporter 0x1a71b5fd \"nextjournal.clerk.builder$stdout_reporter@1a71b5fd\"]}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
let opts = nextjournal.clerk.sci_env.read_string(state)
nextjournal.clerk.static_app.init(opts)
</script></body></html>